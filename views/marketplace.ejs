
<h2 class="text-2xl font-bold">Marketplace</h2>

<form method="GET" action="/marketplace" class="my-3">
  <select name="state" onchange="this.form.submit()" class="border px-2 py-1 rounded">
    <option value="">All States</option>
    <% states.forEach(s => { %>
      <option value="<%= s %>" <%= selectedState===s ? 'selected' : '' %>><%= s %></option>
    <% }) %>
  </select>
</form>

<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
  <% crafts.forEach(craft => { %>
    <div class="bg-white rounded-lg p-4 shadow">
      <img src="<%= (craft.images && craft.images[0]) || '/images/placeholder.png' %>" class="w-full h-40 object-cover rounded" />
      <h3 class="font-semibold mt-2"><%= craft.name %></h3>
      <p class="text-sm text-gray-600">By <%= craft.seller?.name || 'Unknown' %> • <%= craft.originState %></p>
      <p class="mt-2 text-sm line-clamp-3"><%= craft.description %></p>
      <div class="mt-3 flex justify-between items-center">
        <span class="font-bold">₹<%= craft.price %></span>
        <div>
          <a class="px-3 py-1 bg-amber-700 text-white rounded" href="/marketplace/<%= craft._id %>">View</a>
        </div>
      </div>
    </div>
  <% }) %>
</div>
